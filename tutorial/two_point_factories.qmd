---
title: "Two-Point Factories Overview"
format: html
---

{{< include _functions.qmd >}}

## Purpose of this Document

This document provides an overview of working with two-point statistics in Firecrown, from obtaining data to computing predictions.

## Complete Workflow

Working with two-point statistics in Firecrown follows this general pattern:

```{mermaid}
%%| label: fig-workflow
%%| fig-align: center
%%| fig-cap: "Two-Point Statistics Workflow"
graph TD
  A["Metadata + Data Sources"]
  A --> B1["Generate from Scratch<br/>(Two-Point Generators)"]
  A --> B2["Extract from SACC<br/>(Loading SACC Data)"]
  B1 --> C["Metadata + Optional Data"]
  B2 --> C
  C --> D["Apply Scale Cuts<br/>(Optional)"]
  D --> E["TwoPointFactory<br/>(Factory Basics)"]
  E --> F["TwoPoint Objects"]
  F --> G["Compute Theory<br/>(Integration Methods)"]
```

## Tutorial Series

### 1. Obtaining Data

First, obtain the metadata and data needed for your analysis:

**[Two-Point Generators](two_point_generators.qmd)**
- Create metadata and data programmatically
- Generate LSST-SRD redshift distributions
- Define systematics factories (WeakLensingFactory, NumberCountsFactory)
- **Use when:** Creating forecasts or simulations from scratch

**[Loading SACC Data](two_point_sacc_loading.qmd)**
- Extract metadata and data from SACC files
- Full extraction (recommended) vs. legacy indices-only approach
- Validate consistency of extracted data
- **Use when:** Working with real observations or pre-existing simulations

### 2. Constructing TwoPoint Objects

Once you have metadata ± data, construct [[likelihood|TwoPoint]] objects:

**[Factory Basics](two_point_factory_basics.qmd)**
- Understanding the [[likelihood|TwoPointFactory]] role
- Mapping measurements to source factories
- Handling multiple TypeSource instances
- Construction from layouts vs. measurements
- **Use for:** All analyses — this is the core construction mechanism

### 3. Optional: Data Filtering

Apply scale cuts to restrict analysis ranges (independent of data source):

**[Scale Cuts and Filtering](two_point_scale_cuts.qmd)**
- Define valid ranges with TwoPointBinFilterCollection
- Filter by tracer combinations
- Use TwoPointExperiment for complete configuration management
- **Use when:** Models have limited validity ranges

### 4. Computing Predictions

Control how theory predictions are computed:

**[Integration Methods](two_point_integration.qmd)**
- Choose integration methods (Limber vs. FKEM)
- Configure accuracy vs. speed trade-offs
- Understand method differences at different scales
- **Use when:** Optimizing computation or requiring high accuracy

## Quick Start Guide

**New to Firecrown?** Start with [Two-Point Framework](two_point_framework.qmd) for conceptual overview.

**Have a SACC file?**
1. [Loading SACC Data](two_point_sacc_loading.qmd)
2. [Factory Basics](two_point_factory_basics.qmd)
3. Optionally: [Scale Cuts](two_point_scale_cuts.qmd)

**Generating from scratch?**
1. [Two-Point Generators](two_point_generators.qmd)
2. [Factory Basics](two_point_factory_basics.qmd)
3. Optionally: [Scale Cuts](two_point_scale_cuts.qmd)

**Optimizing computation?**
- [Integration Methods](two_point_integration.qmd)
